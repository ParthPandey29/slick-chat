const mongoose=require('mongoose')
const bcrypt = require('bcrypt')
const userSchema=mongoose.Schema({
    name:{type:String,required:true},
    email:{type:String,required: true,unique:true},
    password:{type:String,required:true},
    picture:{type:String,default:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAMAAzAMBIgACEQEDEQH/xAAbAAEAAgMBAQAAAAAAAAAAAAAABgcBBAUDAv/EADsQAAEDAwEFAwoEBgMBAAAAAAEAAgMEBREGEiExQVEHE2EUIiMyQnGBkbHBUqHR4TNDU2Jy8CQ08RX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AvFERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERARFgnA3oMoubdr1RWiPbrJg1x9WNpy93uChN11zWT7TaGMU0fJziC/9EFiyyMiG1I9rG9XHAXNn1DaackS18ORyDsqt4rffb4RIIqmdrvbkJa3811KfQNxfjv6qmg8Bl5+yCVHWNkB/wC3n3MK+49WWSU4Fc1v+QIUfHZ47G+5b/CH915zdns4GYbjGT0fEd/yKCaUtyoqoDyerhkJ6PBW4qsqtGXql9JFHFMBzhk84fAgLwpr5erLN3T5ZmbP8moaSD7soLaRQ+z64pKnZiuTPJZOG2Dlh/RS1jxI1rmkFpGQQcgoPtERAREQEREBERAREQEREBEWDwQCfFQ/VGr20W3S2xzX1A3Pl5M/Urx1rqZ0BfbLfIBLjE8o9gfhHiubpLSrrls1twBFJnLIzxl8T4IOdaLHctQVJqC53duOZKmbO8+HVTyz6Vtls2XiATzjjLMM49w4BdqKJkTAyNoYxowGjgF6IMDwWQiICIiAtaso6etiMVXBHNGfZe3P/i2UQQW+aG8x0tnec8e4kd9HH6FcCz3u4aeqe5ka/uc+kppN2Dzx0Vsri6g0/TXmDEjdido8yUcR7+oQbdputLdqUT0km0PaaeLT0K31UME1y0tdXBw2JGHzmH1ZW/7zVoWi4091oY6qlOWO4tPFp5goN5ERAREQEREBERAREQCuBq69Ns9uJjP/ACZfNiHTq5d524Eqpr/Wy32/FkJLgX9xC344z90HvpCxuvVcaioyaSF2ZM+2/jj6ZVosAaA1oAAG4AcFp2i3x2yghpIhuY3e78TuZ+a3kBERAReVRNFTwvmnkayNgy5zjuCg93124vLLVENkfzZRx9wQT3KKopdU3uR2RXyN8AAAtqi1nd6eQGWRtQzm2Ru/5oLTRcHT+pqO9ejb6GqAyYnc/cea7uRuQZREQcTU9ijvVFsgAVMeTE8jn0PgVBNLXeayXZ0VRtNhkf3c8Z9hw3Z+atZV72h2gQzx3KBuGSHYmA/FyP8AvggsBhDgHN3g78jmvpRjQd0NdaRDK7M1Mdg54lvJSdAREQEREBERAQ7kRBx9W13kFhqpWnD3N2Ge87lDuzy3Ce5vq3jaFOzDSfxH9l0u0yc+T0NNydI6Qj3DA+q6HZ9TCGxd7zmkc74cEEmCyiICwVlaV6qPJLVV1A4xxOI9+NyCvdb3p9xr3UcLwKOA4xykcOJPgo0mSfWOTxJ6lEGEREH3HI+KVksT3MkYQWubxBCtjS14/wDsWtksmO/Z5soHXr8VUilnZ1UmO8S0/szREkeLUFkoiIB4bloXmhbcbXU0rxuew49/I/Nb6IKs0TVuoNQxwyEhs2Ynjo7l+Y/NWkFUuoozbdUzvYSO7nbM0fEFWxG7bY144OAIQfaIiAiIgIiICIiCue0t5N0pWcmwE/N37KYaUjEenaBo/ogqHdpTSLtTHkYPuVMtLOD9P0BHDuQg6qIiAubqOF1RYq6JoyTC7Hw3rpL5eA4EOGQRghBRnu4IurqW1vtN2lgLT3Tztwux6wPJctBhERAUn7PYTJf+8A3RwuJ+O5Rkb1ZehLSaC3GpmaWzVWDgjeG8kEpREQEO9EQVf2iMxfi7m6Fv3Vh2WQyWiieeJgYT8gq+7RHB1+wOLYBlWBY2llnomniIGfRBvIiICIiAiIgIURBBO02A7NvqByc6M/LI+hXY0FOJtOwszvic5hHTevTW9Ca3T0+yMvhIlb8OP5ZUd7N69rKmooi4elHeMHiOKCwUWAcrKAsELKxzQc+9WilvFJ5PVNO7ex7fWYeoVbXfS9ytjiRC6ohB3SRDPzHJWxnqufU3u10ri2evga4cW7YJ+QQU64Fpw4EHoRhe1NR1VW8MpqeSVxO7ZaVZUmptNud580bj1MBP2XvTalsT/NirIo89Wlg+iDiac0Z3UjKu773NwWwA5Gf7uqm+PFeNNVU9UzbpZ45W9WPB+i9gUGUREBEWtX1TaOinqJNzYmFxKCrtWyeW6mqWxnJ22wtx14fdWtBH3UTIxwY0NHwVV6Vp3XTU8UjwcB5qJPDHD8yFa6DKIiAiIgIiICIiD5kY17HMeMtIwQqjrIptOaj2mA5glD2Y9ph/bcrddwUV11ZjXUPltOzaqKcZwPabz+SCR0NTFV0sVRA7ajkaHNWwq60HfxRym21TwIZTtRPJ3NdzHuKsPP7oMk43k4HVRO/60p6Jz4Le0VE43F3sNP3XN1xqR5kfbKCQhjN1RI07yfwj7qE4APDCDeuN4uNzJ8tq5HsP8sHZYPgtEDAwOHRZWEDd0REQfUbnRSCWJzo5BwewkEfFSWz60uFEQytcauAbsv8AXHuPP4qMoguS0Xeku1MJqOTax6zTuc0+IXQVJ264VFsq21FJIWvad7RwcOhVt2S6xXe3R1cO4ndIzmxw4hB0VCO0S7COCO1xO8+Qh8uOQ5D4qT3m6w2mgfUzneBhjOb3cgFWdspKnUt+d3hJ7x5knfya3PD7BBLezy2GCgkrpR59QcNJ47IUvXlTxMgiZFGA1jBho8F6oCIiAiIgIiICIiAsEZWUQVtrTTbqGZ9womE0rzmRjR/Dd+n0WxZtZOjtE1PWkmpji9DJj1+WD4qfSRtkYWPaHNducDzCrzVGkH0rn1VrYZIT5zoRvLPd1CCIklxLnesTvPU8VhZCIMIiICIiAiIgypBo29R2mqnNS7FO+PJA35cOCjy3LZbau6VAho4i53tEjzWeLjyQbt0r67U12Y2ONxOdmGFvsDr+pViabssNmoWwtw6Z2DLJ+I+HgF8ac09T2SHzfSVDx6SY8/AdAu1gIM4REQEREBERAREQEREBERAWCsogjl80nQXNzpominqTxewYDj4hQa6aZultc4yQGSEcJI/OH6hW4sHx4IKMO44IIPQorjrbJba4Hymjifn2sYK40+hLTISYnVEP+MmfqgrVYVgns9pc7rhU4/xb+i+4+z+gb/FrKp/gNkfQIK7XvS0lRWSCOlhkkeeTW5VnUmj7JTEOFMZXDnK8uXap6eGnZsQRsjb/AGjCCBWbQs8uzLdX90z+kw5d8TwCnNBQ0tvpxBRQMijG/DRxPUnmVtIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAiIgIiICIiAixlZQETKICJlYyEGUREBFjI6pkdUGUWMhMjqgyixkJkIMosZCygIiICIiD//Z"}
},{
    timestamps:true
})
userSchema.methods.matchPassword = async function (enteredPassword){
    return await bcrypt.compare(enteredPassword,this.password)
}
userSchema.pre('save',async function (next){
    if(!this.isModified){
        next()
    }
    const salt = await bcrypt.genSalt(10)
    this.password = await bcrypt.hash(this.password,salt)
})
const User=mongoose.model("User",userSchema)
module.exports = User